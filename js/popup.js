const headerButton=document.querySelector(".page-header__contacts-item--call-back a"),popup=document.querySelector(".popup"),closeButton=popup.querySelector(".popup__button--close"),form=popup.querySelector(".popup__form"),userName=popup.querySelector("#popup-user-name"),phone=popup.querySelector("#popup-user-phone-number"),message=popup.querySelector("#popup-user-question");let isStorageSupport=!0;const storage={},openPopup=()=>{popup.classList.add("popup--show"),document.body.classList.add("overlay")},closePopup=()=>{popup.classList.remove("popup--show"),document.body.classList.remove("overlay")};try{storage.name=localStorage.getItem("name"),storage.phone=localStorage.getItem("phone"),storage.message=localStorage.getItem("message")}catch(e){isStorageSupport=!1}headerButton.addEventListener("click",(e=>{e.preventDefault(),popup.classList.add("popup--show"),document.body.classList.add("overlay"),storage.name?(userName.value=storage.name,phone.value=storage.phone,message.value=storage.message,message.focus()):userName.focus()})),closeButton.addEventListener("click",(e=>{e.preventDefault(),closePopup()})),form.addEventListener("submit",(()=>{isStorageSupport&&(localStorage.setItem("name",userName.value),localStorage.setItem("phone",phone.value),localStorage.setItem("message",message.value))})),window.addEventListener("keydown",(e=>{"Escape"===e.code&&(e.preventDefault(),popup.classList.contains("popup--show")&&closePopup())})),popup.addEventListener("click",(e=>{e.target===popup&&closePopup()}));